<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout_admin}">
<div th:fragment="content">
	<h2">Tìm kiếm danh mục</h2>
	<form th:action="@{/categories}" method="get" class="mb-3">
		<div class="input-group">
			<input type="text" name="keyword" th:value="${keyword}"
				class="form-control" placeholder="Nhập tên danh mục">
			<button type="submit" class="btn btn-primary">Tìm kiếm</button>
			<a th:href="@{/categories}" class="btn btn-secondary">Danh sách
				đầy đủ</a>
		</div>
	</form>
	<table class="table table-striped" th:if="${!categories.empty}">
		<thead>
			<tr>
				<th>ID</th>
				<th th:text="#{name}">Tên</th>
				<th th:text="#{description}">Mô tả</th>
				<th>Thao tác</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="category : ${categories.content}">
				<td th:text="${category.id}"></td>
				<td th:text="${category.name}"></td>
				<td th:text="${category.description}"></td>
				<td><a th:href="@{/categories/edit/{id}(id=${category.id})}"
					class="btn btn-warning btn-sm">Sửa</a> <a
					th:href="@{/categories/delete/{id}(id=${category.id})}"
					class="btn btn-danger btn-sm" onclick="return confirm('Xóa?')">Xóa</a>
				</td>
			</tr>
		</tbody>
	</table>
	<p th:if="${categories.empty}" class="alert alert-info">
		Không tìm thấy kết quả cho '<span th:text="${keyword}"></span>'.
	</p>
	<nav th:if="${categories.totalPages > 1}" aria-label="Phân trang">
		<ul class="pagination justify-content-center">
			<li class="page-item"
				th:classappend="${categories.first} ? 'disabled' : ''"><a
				class="page-link"
				th:href="@{/categories(page=${categories.number - 1}, keyword=${keyword})}"
				th:text="Trước">Trước</a></li>
			<li th:each="i : ${#numbers.sequence(0, categories.totalPages - 1)}"
				class="page-item"
				th:classappend="${i == categories.number} ? 'active' : ''"><a
				class="page-link"
				th:href="@{/categories(page=${i}, keyword=${keyword})}"
				th:text="${i + 1}"></a></li>
			<li class="page-item"
				th:classappend="${categories.last} ? 'disabled' : ''"><a
				class="page-link"
				th:href="@{/categories(page=${categories.number + 1}, keyword=${keyword})}"
				th:text="Sau">Sau</a></li>
		</ul>
		<p class="text-muted">
			Trang <span th:text="${currentPage + 1}"></span> / <span
				th:text="${categories.totalPages}"></span> (Tổng: <span
				th:text="${categories.totalElements}"></span>)
		</p>
	</nav>
</div>